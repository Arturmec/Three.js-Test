<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  
</head>
<body>
  <canvas id="c"></canvas>
  <script type="module">
	    /** Importa build do three.js*/
	    import * as THREE from 'https://threejsfundamentals.org/threejs/resources/threejs/r122/build/three.module.js';
	
	    /** Define função main*/
	    function main() {

      /** Busca canvas na DOM */
      const canvas = document.querySelector('#c');

      /** Cria renderizador WebGL no canvas */
      const renderer = new THREE.WebGLRenderer({canvas});

      /** Define field of view (fov) em graus, na direcao vertical */
      const fov = 75;

      /** Define aspect ration (width/height) com padrao 300x150 pixels (300/150 = 2) */
      const aspect = 2;

      /** Plano mais próximo da câmera que será renderizado [units] */
      const near = 0.1;

      /** Plano mais afastado da câmera que será renderizado [units] */
      const far = 5;

      /** Define perspective camera frustrum (tronco de piramide) */
      const camera = new THREE.PerspectiveCamera(fov, aspect, near, far);

      /** 
       * Define posicao da camera 
       * Por default, a camera olha para a direção -Z, com +X para direita e +Y para cima
       */
      camera.position.z = 2;

      /** Cria uma cena */
      const scene = new THREE.Scene();
      
      {
        const color = 0xFFFFFF;
        const intensity = 1;
        const light = new THREE.DirectionalLight(color, intensity);
        light.position.set(-1, 2, 4);
        scene.add(light);
      }


      /** Define uma geometria do tipo "box" */
      const boxWidth = 1;
      const boxHeight = 1;
      const boxDepth = 1;
      const geometry = new THREE.BoxGeometry(boxWidth, boxHeight, boxDepth);

      /** Define cor (material) utilizando CSS style 6 digit hex color values */
      const material = new THREE.MeshPhongMaterial({color: 0x44aa88});  // greenish blue

      /** 
       * Define uma malha, representada por geometria e material
       * Malhas sao compostas por:
       * 1. Geometria
       * 2. Material
       * 3. Posicao, Orientacao e Escala relativo ao "parent element", no caso a cena
       * ... No exemplo, o ponto 3 não ficou claro.
       */
      const cube = new THREE.Mesh(geometry, material);

      /** Adiciona a malha à cena */
      scene.add(cube);

      function render(time) {
    time *= 0.001;  // convert time to seconds

    cube.rotation.x = time;
    cube.rotation.y = time;

    renderer.render(scene, camera);

    requestAnimationFrame(render);
  }
  requestAnimationFrame(render);
    }

    /** Chama função main */
    main();

  </script>
  
</body>
</html>